## Документация по скриптам

В этом документе описано, как писать LUA-скрипты для управления чатом Twitch и взаимодействиями с вводом.
Следующие классы C# доступны для импорта в ваши LUA-скрипты с помощью функции import(assembly, class):

## Доступные импорты

### Управление вводом с помощью (`TwitchController.Hardware`)

- Интерфейс импорта: ([Methods](API\RU\KeyboardMethods.md))

```lua
local Keyboard = import('TwitchController', 'TwitchController.Hardware').Keyboard
```

- Импорт интерфейса: ([Methods](API\RU\MouseMethods.md))

```lua
local Mouse = import('TwitchController', 'TwitchController.Hardware').Mouse
```

### Взаимодействие с чатом Twitch с помощью (`TwitchChatController.Stuff.Twitch`)

- Импорт интерфейса: ([Methods](API\RU\ChatMethods.md))

```lua
local TwitchChat = import('TwitchController', 'TwitchController.Stuff').Chat
```

### Некоторые инструменты для создания скриптов (`TwitchChatController.Stuff.Tools`)

- Импорт интерфейса: ([Методы](API\RU\ToolsMethods.md))

```lua
local Tools = import('TwitchController', 'TwitchController.Stuff').Tools
```

## 1. Требования к скрипту

- Формат файлов: Скрипты должны быть сохранены как файлы .lua.
- Возвращаемое значение: Скрипт **должен** возвращать таблицу, содержащую конфигурацию. Подробности см. в разделе «Таблица конфигурации» ниже.
- Кодировка: Используйте кодировку UTF-8 для ваших скриптов.

## 2. Таблица конфигурации

Таблица конфигурации - это основной интерфейс между вашим скриптом и приложением. Она должна содержать следующие ключи

- channel `(string, обязательно)`: Название вашего канала Twitch.
- timeout `(число, опционально)`: Таймаут по умолчанию для команд в миллисекундах (по умолчанию: `30,000`).
- logs `(boolean, опционально)`: Включает или отключает отладочную информацию из TwitchLib.
- opening-bracket `(string, опционально)`: Символ открывающей скобки для параметров команды.
- closing-bracket `(string, опционально)`: Символ закрывающей скобки для параметров команды.
- commands `(таблица, опционально)': Таблица, содержащая определения ваших пользовательских команд. См. раздел «Команды» ниже. (если не представлены, не будут работать!)
- rewards `(таблица, опционально)`: Таблица с определениями ваших пользовательских вознаграждений. См. раздел «Награды» ниже. (если не представлен, не будет работать!)

## 3. Команды

Таблица Commands содержит определения ваших пользовательских команд. Каждый ключ в этой таблице представляет собой имя команды (без префикса «!»). Значение, связанное с именем каждой команды, представляет собой другую таблицу, содержащую следующие ключи

- action `(function, обязательно)`: Функция, которая будет выполняться при срабатывании команды. Эта функция принимает два параметра:
  - `sender`: Строка, содержащая ник Twitch пользователя, который отправил эту команду.
  - `args`: Строковый массив аргументов, отправленных пользователем после команды, разделенных пробелами.
- timeout `(число, опционально)`: Число, обозначающее время ожидания команды.
  - значения:
    - `-1`: Вместо этого используется таймаут по умолчанию
    - `0`: Нет свертывания
    - `100`: 100 миллисекундное охлаждение
- description `(строка, опционально)`: Описание команды _(пока не имеет смысла)_.

## 4. Награды

Таблица Rewards содержит определения ваших пользовательских команд. Каждый ключ в этой таблице представляет собой название награды от twitch. Значение, связанное с именем каждой команды, представляет собой другую таблицу, содержащую следующие ключи

- action `(function, обязательно)`: Функция, которая будет выполняться при срабатывании команды. Эта функция принимает два параметра:
  - `sender`: Строка, содержащая ник Twitch пользователя, который отправил эту команду.
  - `args`: Строковый массив аргументов, отправленных пользователем после команды, разделенных пробелами.
- timeout `(число, опционально)`: Число, обозначающее время ожидания команды.
  - значения:
    - `-1`: Вместо этого используется таймаут по умолчанию
    - `0`: Нет свертывания
    - `100`: 100 миллисекундное охлаждение
- description `(строка, опционально)`: Описание команды _(пока не имеет смысла)_.
